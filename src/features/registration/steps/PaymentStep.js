import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/// <reference lib="dom" />
import { useState } from 'react';
import { useRegistrationStore } from '../store/registrationStore';
import { CreditCard, Lock, ShieldCheck } from 'lucide-react';
export const PaymentStep = () => {
    const { payment, updatePayment, nextStep, prevStep } = useRegistrationStore();
    const [isSubmitting, setIsSubmitting] = useState(false);
    // Mock submission
    const handleFinish = async () => {
        setIsSubmitting(true);
        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 1500));
        setIsSubmitting(false);
        nextStep(); // Go to summary
    };
    const isValid = payment.cardNumber &&
        payment.cardName &&
        payment.expiry &&
        payment.cvv &&
        payment.authorized;
    const handleInputChange = (e) => {
        const { name, value, type, checked } = e.target;
        updatePayment({ [name]: type === 'checkbox' ? checked : value });
    };
    return (_jsxs("div", { className: "animate-in fade-in slide-in-from-right-4 duration-500 space-y-8", children: [_jsxs("div", { className: "bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden", children: [_jsx("div", { className: "absolute right-0 top-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none" }), _jsxs("div", { className: "relative z-10 flex flex-col md:flex-row justify-between items-center gap-4", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-xl font-bold mb-1", children: "Acesso Premium" }), _jsx("p", { className: "text-emerald-50 text-sm", children: "Cobran\u00E7a justa e transparente." })] }), _jsxs("div", { className: "text-center md:text-right", children: [_jsx("span", { className: "text-3xl font-bold", children: "R$ 10,00" }), _jsx("span", { className: "text-emerald-100 text-sm block", children: "/m\u00EAs por paciente ativo" })] })] })] }), _jsxs("section", { className: "space-y-6", children: [_jsxs("h3", { className: "flex items-center gap-2 text-lg font-semibold text-stone-800 border-b border-stone-100 pb-2", children: [_jsx(CreditCard, { className: "w-5 h-5 text-emerald-500" }), "Dados de Pagamento"] }), _jsxs("div", { className: "bg-stone-50 p-6 rounded-xl border border-stone-200", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsxs("div", { className: "col-span-1 md:col-span-2 space-y-1", children: [_jsx("label", { className: "text-xs font-bold text-stone-500 uppercase", children: "N\u00FAmero do Cart\u00E3o" }), _jsxs("div", { className: "relative", children: [_jsx("input", { name: "cardNumber", value: payment.cardNumber, onChange: handleInputChange, placeholder: "0000 0000 0000 0000", className: "w-full pl-10 p-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all font-mono" }), _jsx(CreditCard, { className: "absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400" })] })] }), _jsxs("div", { className: "col-span-1 md:col-span-2 space-y-1", children: [_jsx("label", { className: "text-xs font-bold text-stone-500 uppercase", children: "Nome no Cart\u00E3o" }), _jsx("input", { name: "cardName", value: payment.cardName, onChange: handleInputChange, placeholder: "COMO ESTA NO CARTAO", className: "w-full p-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all uppercase" })] }), _jsxs("div", { className: "space-y-1", children: [_jsx("label", { className: "text-xs font-bold text-stone-500 uppercase", children: "Validade" }), _jsx("input", { name: "expiry", value: payment.expiry, onChange: handleInputChange, placeholder: "MM/AA", className: "w-full p-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all text-center" })] }), _jsxs("div", { className: "space-y-1", children: [_jsx("label", { className: "text-xs font-bold text-stone-500 uppercase", children: "CVV" }), _jsxs("div", { className: "relative", children: [_jsx("input", { name: "cvv", value: payment.cvv, onChange: handleInputChange, placeholder: "123", type: "password", maxLength: 4, className: "w-full pl-10 p-3 rounded-lg border border-stone-300 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all text-center" }), _jsx(Lock, { className: "absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400" })] })] })] }), _jsxs("div", { className: "mt-4 flex items-center gap-2 text-xs text-stone-500", children: [_jsx(ShieldCheck, { className: "w-4 h-4 text-emerald-600" }), _jsx("p", { children: "Seus dados s\u00E3o criptografados. Ambiente 100% seguro." })] })] }), _jsxs("div", { className: "bg-emerald-50 p-4 rounded-xl border border-emerald-100 flex gap-3 items-start", children: [_jsx("input", { type: "checkbox", id: "auth", name: "authorized", checked: payment.authorized, onChange: handleInputChange, className: "mt-1 w-4 h-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded cursor-pointer" }), _jsxs("label", { htmlFor: "auth", className: "text-sm text-emerald-900 cursor-pointer", children: [_jsx("strong", { children: "Autorizo a cobran\u00E7a mensal" }), " baseada no n\u00FAmero de pacientes ativos. Entendo que posso bloquear pacientes a qualquer momento para interromper a cobran\u00E7a daquele acesso."] })] })] }), _jsxs("div", { className: "flex justify-between pt-6", children: [_jsx("button", { onClick: prevStep, disabled: isSubmitting, className: "px-6 py-3 text-stone-600 font-medium hover:bg-stone-100 rounded-xl transition-all disabled:opacity-50", children: "Voltar" }), _jsx("button", { onClick: handleFinish, disabled: !isValid || isSubmitting, className: "px-8 py-3 bg-emerald-600 text-white rounded-xl font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-emerald-500/20 flex items-center gap-2", children: isSubmitting ? (_jsxs(_Fragment, { children: [_jsx("span", { className: "w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" }), "Processando..."] })) : ('Finalizar Cadastro') })] })] }));
};
